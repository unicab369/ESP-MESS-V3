<!DOCTYPE html>
<html>
<head>
    <title>ESP32 Server Info Fetcher</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="index-style.css">
</head>
<body>
    <div class="container">
        <h1>üîç ESP32 Server Info Fetcher</h1>
        
        <div class="input-section">
            <div class="form-group">
                <label for="serverIp">Enter ESP32 Server IP Address:</label>
                <input type="text" id="serverIp" placeholder="e.g., 192.168.1.100" value="10.0.0.188">
                <small style="color: #6c757d; display: block; margin-top: 5px;">
                    Enter the IP address of your ESP32 server (port 80)
                </small>
            </div>
            
            <button class="btn-action" onclick="fetchServerInfo()">
                üîç Fetch Server Information
            </button>
            
            <div id="status" class="status hidden"></div>
        </div>
        
        <div class="info-section">
            <h2>üìä Server Information</h2>
            <div class="info-grid" id="infoGrid">
                <!-- Info will be populated here -->
                <div class="info-card">
                    <h3>IP Address</h3>
                    <div class="info-value" id="displayIp">-</div>
                </div>
                <div class="info-card">
                    <h3>Free Heap Memory</h3>
                    <div class="info-value" id="heapMemory">-</div>
                </div>
                <div class="info-card">
                    <h3>Connection Status</h3>
                    <div class="info-value" id="connectionStatus">Not Connected</div>
                </div>
                <div class="info-card">
                    <h3>Response Time</h3>
                    <div class="info-value" id="responseTime">-</div>
                </div>
            </div>
            
            <div class="server-list" id="serverList">
                <h3>üìã Saved Servers</h3>
                <div class="server-item" onclick="useSavedServer('192.168.1.100')">
                    <span class="server-ip">192.168.1.100</span> - Main ESP32
                </div>
                <div class="server-item" onclick="useSavedServer('192.168.1.101')">
                    <span class="server-ip">192.168.1.101</span> - Backup ESP32
                </div>
                <div class="server-item" onclick="useSavedServer('192.168.1.102')">
                    <span class="server-ip">192.168.1.102</span> - Test ESP32
                </div>
            </div>
        </div>
        
        <div style="margin-top: 30px; text-align: center; color: #6c757d;">
            <p>Enter the IP address of any ESP32 server running the info endpoint at /info</p>
        </div>
    </div>

	<script src="index-script.js"></script>
    <script>        
        // Auto-fetch if IP is already in input field on page load
        window.addEventListener('DOMContentLoaded', () => {
            const ipInput = document.getElementById('serverIp');
            if (ipInput.value && ipInput.value !== '192.168.1.') {
                fetchServerInfo();
            }
        });
        
        // Allow pressing Enter in the input field
        document.getElementById('serverIp').addEventListener('keypress', function(event) {
            if (event.key === 'Enter') {
                fetchServerInfo();
            }
        });
        
        // Initialize
        updateServerList();
    </script>
</body>
</html>